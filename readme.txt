main.py
Rulează serverul Flask. Codul if __name__ == '__main__' asigură că serverul pornește doar când execuți acest fișier direct, nu când îl imporți. Parametrul debug=True activează modul de depanare, serverul se repornește automat la schimbări de cod și afișează erorile detaliate în browser.
init.py
Este fișierul de inițializare a pachetului website. Funcția create_app() este o fabrică de aplicații. Creează instanța Flask, o configurează, și o întoarce. Setează SECRET_KEY pentru semnarea sesiunilor și SQLALCHEMY_DATABASE_URI pentru a se conecta la fișierul database.db. Inițializează obiectele db (SQLAlchemy) și login_manager (Flask-Login) cu aplicația. Înregistrează blueprint-urile views, auth, calendar_bp și roadmap_bp pentru a adăuga rutele lor la aplicație. Apelează funcția create_database(app) care verifică dacă fișierul bazei de date există; dacă nu, execută db.create_all() pentru a crea toate tabelele definite în models.py. Funcția decorator @login_manager.user_loader spune lui Flask-Login cum să găsească un utilizator după ID-ul stocat în sesiune.
models.py
Definește structura bazei de date folosind clase SQLAlchemy. Fiecare clasă este un model care se mapează la un tabel SQL. Clasa Note are un id (cheie primară), un data (textul notei, de tip string cu lungime maximă 10000), un date (timestamp-ul creării) și un user_id (cheie străină către tabelul User). Clasa CalendarEvent are câmpuri pentru title, description, event_date (doar data), start_time, end_time, color, și legături către User și Note. Clasa RoadmapGoal are câmpuri pentru title, description, position (pentru ordonare), deadline, is_completed, completed_at și o legătură către User. Clasa User moștenește UserMixin din Flask-Login pentru a obține metode necesare ca is_authenticated. Are câmpuri pentru email, password (hash-uit), first_name și relații notes, calendar_events, roadmap_goals. Parametrul cascade="all, delete" în relații înseamnă că la ștergerea unui utilizator, se șterg automat și toate notele, evenimentele și obiectivele lui.
auth.py
Definește blueprint-ul auth. Ruta /login acceptă metodele GET și POST. La GET, randări template-ul login.html. La POST, extrage email și password din request.form. Caută utilizatorul în baza de date după email. Dacă există, verifică parola cu check_password_hash. Dacă este corectă, apelează login_user(user, remember=True) pentru a crea sesiunea și redirecționează către views.home. Altfel, afișează mesaje flash de eroare. Ruta /logout apelează logout_user() pentru a încheia sesiunea și redirecționează la login. Ruta /sign-up extrage datele formularului, verifică dacă emailul există deja, validează lungimile câmpurilor și egalitatea parolelor. Dacă totul este corect, creează un hash pentru parolă cu generate_password_hash, creează un nou obiect User, îl salvează în baza de date, autentifică utilizatorul și redirecționează.
views.py
Definește blueprint-ul views. Ruta principală / este protejată cu @login_required. La GET, randări home.html și pasează utilizatorul curent și data de astăzi pentru calendar. La POST, primește textul notei din request.form.get('note'). Verifică dacă are cel puțin un caracter. Dacă da, creează un nou obiect Note cu textul și user_id=current_user.id, îl adaugă în sesiunea bazei de date și face commit. Ruta /delete-note primește un JSON cu noteId. Găsește nota în baza de date, verifică dacă note.user_id este egal cu current_user.id pentru autorizație, și dacă da, o șterge. Ruta /edit-note primește JSON cu noteId și newData. Găsește nota, verifică autorizația, actualizează note.data și note.date, și salvează modificările.
calendar.py
Definește blueprint-ul calendar_bp. Ruta /calendar randări pagina. Ruta /calendar/events cu GET întoarce toate evenimentele utilizatorului curent ca JSON. Transformă fiecare obiect CalendarEvent într-un dicționar cu formatul așteptat de FullCalendar.js (cu id, title, start, end, color, extendedProps). Gestionează datele allday și cele cu timp. Ruta POST /calendar/events primește JSON, extrage titlul, data, ora, descrierea, culoarea și noteId, creează un nou eveniment și îl salvează. Rutele cu PUT și DELETE la /calendar/events/<id> actualizează sau șterg un eveniment specific, după ce verifică event.user_id == current_user.id. Ruta /calendar/notes întoarce o listă de note ale utilizatorului pentru a fi alese în formular. Ruta /calendar/stats calculează și întoarce numărul total de evenimente, cele de astăzi și cele din luna curentă.
roadmap.py
Definește blueprint-ul roadmap_bp. Ruta /roadmap randări pagina și pasează lista sortată de obiective. Ruta GET /roadmap/goals întoarce obiectivele utilizatorului ca JSON. Calculează zilele rămase până la deadline și dacă sunt depășite. Ruta POST /roadmap/goals primește JSON pentru un nou obiectiv, îi calculează poziția ca max_position + 1 și îl salvează. Rutele PUT și DELETE pentru un obiectiv specific actualizează sau șterg după verificarea autorizației. La ștergere, reordonează pozițiile obiectivelor rămase. Ruta POST /roadmap/goals/reorder primește o listă de ID-uri în noua ordine și actualizează câmpul position pentru fiecare obiectiv. Ruta GET /roadmap/stats calculează numărul total, complet, în așteptare și depășit, plus rata de completare procentuală.
base.html
Este scheletul HTML pentru toate paginile. Conține secțiunea <head> cu meta tag-uri, linkuri CDN către Bootstrap CSS și Font Awesome, și stiluri CSS inline pentru note. Tag-ul <title> utilizează blocul Jinja {% block title %}. Corpul conține un navbar Bootstrap care afișează linkuri diferite în funcție de user.is_authenticated. Afișează mesajele flash (de succes sau eroare) primite de la server. Blocul {% block content %} este unde se inserează conținutul specific fiecărei pagini. La sfârșit încorporează scripturile JavaScript pentru jQuery, Popper.js și Bootstrap. Blocul {% block javascript %} permite adăugarea de scripturi specifice. Conține deja o funcție simplă deleteNote pentru ștergere.
home.html
Extinde base.html. Afișează un titlu "My Notes". Dacă utilizatorul nu are note, afișează un mesaj informativ. Altfel, iterează prin user.notes și pentru fiecare creează un element de listă. Afișează conținutul notei (care poate fi dublu-click pentru editare), data formtatată și butoanele de Edit și Delete. Sub aceasta, ascuns inițial, este un formular de editare cu un textarea și butoane Save/Cancel. Sub listă este formularul principal pentru a adăuga o notiță nouă, cu un textarea și un contor de caractere. Include și un modal Bootstrap pentru confirmarea ștergerii. Blocul său de JavaScript definește funcțiile pentru gestionarea ștergerii (cu confirmare în modal), editării în linie (show/hide form, fetch către /edit-note), contorului de caractere și unei funcții simple de notificare.
login.html și sign_up.html
Extind base.html și conțin formulare HTML simple. login.html are câmpuri pentru email și parolă. sign_up.html are câmpuri pentru email, first name, password și confirm password. Ambele trimit datele prin POST către rutele corespunzătoare fără a specifica acțiunea în form, așa că se folosesc rutele curente. Nu au JavaScript suplimentar, validarea se face pe server.
calendar.html
Extinde base.html. Încarcă CSS-ul și JS-ul pentru FullCalendar.js și definește o cantitate mare de stiluri CSS inline pentru aspectul calendarului și barei laterale. Structura are două coloane principale. Coloana stângă (sidebar) conține un card cu formularul pentru adăugarea/editarea evenimentelor (câmpuri pentru titlu, dată, timp start/end, descriere, selector de culoare și dropdown pentru atașarea unei note existente), un card cu statistici (total, astăzi, luna curentă) și un card cu acțiuni rapide ("Go to Today", "Clear All Events"). Coloana dreaptă conține header-ul calendarului cu butoane de navigare și schimbare a view-ului (month, week, day), containerul <div id="calendar"> unde se încarcă FullCalendar, și o listă de evenimente viitoare. Include și un modal pentru afișarea detaliilor unui eveniment. Blocul său de JavaScript este foarte mare. Inițializează calendarul FullCalendar, configurează opțiunile (view-ul inițial, sursa de evenimente din /calendar/events, handler-e pentru click pe eveniment și pe dată). Gestionează toată logica: încărcarea notițelor în dropdown, salvarea/ștergerea evenimentelor prin fetch, afișarea detaliilor în modal, funcționalitatea de drag & drop a evenimentelor în calendar, și funcții pentru acțiunile din sidebar.
roadmap.html
Extinde base.html. Încarcă biblioteca SortableJS pentru drag and drop. Structura este similară cu cea a calendarului: o sidebar cu formular pentru obiective, statistici de progres și butoane de acțiune, și o zonă principală cu o listă de obiective care pot fi reordonate. Fiecare obiectiv este afișat într-un "card" care arată titlul, descrierea (dacă există), deadline-ul (cu un badge care arată zilele rămase sau "Overdue"), starea (Completed/Pending) și butoane de acțiune. Cardurile completate sau depășite au culori și fundaluri diferite. JavaScript-ul său gestionează: încărcarea și randarea obiectivelor, inițializarea lui Sortable pe listă, salvarea unui obiectiv nou, editarea/ștergerea/toggle-ul stării de completare prin fetch, reordonarea după drag & drop prin apel către /roadmap/goals/reorder, calculul și afișarea statisticilor și funcționalitatea modalului de detalii.